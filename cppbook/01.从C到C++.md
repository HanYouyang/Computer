## 1从C到C++

### 1.1C++的语言历史
C++是从C发展而来的。

C的一些缺点：对类型匹配的检查不够严格、基本没有支持代码重用的机制、不支持面向对象。

C++各种特性来自于各个版本不断地修改添加。

### 1.2输入输出
using namespace std;给出了C++的标准输入输出cin >> 和cout <<两种操作的定义。

### 1.3头文件
一些C中的.h头文件都去掉.h并且前面加上C。

### 1.4强制类型转换运算符的新形式
C++中强制类型转换 int(a)看起来像函数调用 比C中的 (int) a写法更清晰。

### 1.5函数参数的默认值
C++中，声明一个函数可以为函数参数制定默认值。主要是用来配合之后的面向对象中的函数进行设定。

**注意省略的参数只能是最右边的几个，想要省略中间的就得自己指明。**

**函数的默认参数带来的好处是使程序的扩充性更好。**

### 1.6引用和函数参数的传递
#### 1.6.1引用的概念

```c++
int n;
int & r = n;
```
可以说r的类型是int &。某个变量的引用和这个变量是一回事，相当于该变量的一个别名。**定义引用时必须初始化**，否则编译无法通过。**通常用某个变量去初始化引用**。**引用只能引用变量**。可以相互与被引用变量赋值。

#### 1.6.2引用作为函数的返回值
函数的返回值可以是引用

```c++
#include <iosatream>
using namespace std;

int n = 4;
int & SetValue()
{
    return n;
}
int main(){
    SetValue()= 40;
    cout << n << endl;
    int & r = SetValue();
    cout << r << endl;
    return 0;

}
```
#### 1.6.3参数传值
函数参数的传递有两种方式：**传值**和**传引用**。

形参不是引用的话就是传值，也就没有传地址，改变不影响值本身。程序运行过程中内存开辟一个栈，函数调用会有一片新的空间存放局部变量。

#### 1.6.4参数传引用
把形参改成引用，传递方式就是传引用。

#### 1.6.5常引用
定义引用时候在前面加const关键字。**只是不能通过常引用修改引用的内容，还得用之前引用的变量去修改**。

const T &与 T & 是不同的类型，后者可以初始化前者的类型，前者不能初始化后者，除非进行强制的类型转化。

### 1.7内联函数
使用函数需要在内存中开辟栈空间。

使用函数调用雨具和直接把函数中的代码重写相比节省了人力，但是带来了程序运行时间上面的直接开销。但是如果函数本身没有几条语句，那么栈的使用将是的函数调用产生的额外开销和函数本身的执行时间相比就不能忽略了。

C++使用了inline关键字，在函数返回值类型之前。

**内联函数**是使用了inline关键字的函数，区别在于：当编译器调用内联函数语句时，不会将该语句编译成函数调用的指令，而是直接将整个函数体的代码插入调用语句处。

大规模递归并不适合内联函数。内联函数的定义必须在函数定义之后。

### 1.8函数的重载
变量不能重名，但是函数可以。

**重载**是函数参数表不同，函数名相同。通过编译器调用实参的个数和类型来判断应该调用那种函数。但是参数表相同而返回值类型不同是重复定义。

C++虽然会在函数中自动转换类型，但是如果出现**二义性**错误，并不会规定优先选择其中的某一种。

### 1.9指针和动态内存分配
C++不能允许定义元素个数不确定的数组。

```c++
int n;
int a[n];
```

new运算符：
1. p = new T; delete p; 分配一片内存空间给某类型
2. p = new T[N]; delete []p; 动态分配一个任意大小的数组

**内存泄露** 是指程序结束内存空间没有被操作系统回收。只要重新启动计算机就会恢复。

### 1.10用string对象处理字符串
string并不是某种数据类型，而是STL中的一个”类”。

#### 1.10.1 定义string对象
string对象的大小是固定的，并且仅仅存储该内存空间的地址。
还可以定义string对象数组。

#### 1.10.2 string对象的输入输出
同样可以用cin和cout进行输入输出。

#### 1.10.3 string对象的赋值
string对象、字符串常量、字符数组都可以对string对象进行赋值。
 
#### 1.10.4 string对象的运算
用+可以进行连接，也可以用<、>进行比较，通常用到的都是字典序比较ASCII码。


#### 1.10.5 string对象用法示例

// program 1.10.5.cpp string基本用法

```c++
#include <iostream>
#include <string>
using namespace std;
int main()
{
    string s1 = "123", s2;
    s2 += s1;
    s1 = "abc";
    s1 += "def";
    cout << "1)" << s1 << endl;
    if(s2 < s1){
        cout << "2)s2 < s1" << endl;    
    }
    else{
        cout << "2)s2 >= s1" << endl;
    }
    s2[1] = 'A';
    s1 = "XYZ" + s2;
    string s3 = s1 + s2;
    cout << "3)" << s3 << endl;
    cout << "4)" << s4 << endl;
    string s4 = s3.substr(1, 3);
    cout << "5)" << s4 << endl;
    char str[20];
    strcpy(str, s4, c_str());
    cout << "6)" << str << endl;
    return 0;
    
}

```

求大小用到了size()，求子串用到了substr，复制字符串内容用到了c_str。

