## 14处理大型程序

C语言提供了开发大型程序所需要的特性，集成开发工具IDE也可以让开发大型程序变得简单。本章包含：

1. 将大型程序分为几个文件
2. 将几个文件便以为一个可执行文件
3. 使用外部变量
4. 扩展头文件的用途
5. 用实用工具改进程序

### 14.1将程序分为多个文件

**模块**是单个函数，也可以是多个被合理组合在一起的相关函数。

可以不将所有文件都包含在同一个文件里，可以讲一个特定的模块输入到某个文件中。

#### 14.1.1由命令行编译多个源文件

如果已经将三个函数模块分别放到三个文件里面，此时同时编译到一个dbtest文件中得到具体情况。

$ gcc mod1.c mod2.c main.c -o dbtest

此时可以得到三个文件分别的编译信息。如果某个出错，可以单独调试，而后可以使用增量编译节约空间进一步获得总文件。

**增量编译**是指部分模块出错使用.c继续编译，而其他模块正常编译使用.o的编译过程。

如果有些会自动删除.o的编译器，可以使用-c命令强制保留.o文件。

### 14.2模块之间的通信

编译器对于每个程序都是独立编译的。

#### 14.2.1外部变量

**外部变量**是可以由另一模块访问和修改其取值的变量。

```c++
extern int moveNumber;
```
由此可以引用来自另一模块的全局变量的值。

重要规则：必须在源文件的某个地方定义该变量，方法：

1. 在所有函数外定义该变量但前面没有extern
2. 在所有函数外，前加extern，后初始化值定义变量


声明外部数组，不需要提供具体数量，但是如果提供高维的数组，那么需要提供第一维的数组。


#### 14.2.2静态、动态变量与函数

函数外定义的变量既是全局变量有时外部变量。

**静态变量**是只能在特定模块中访问的全局变量。

函数定义时候默认是extern，不需要额外生命，但是如果静态函数则可知仅能在模块内调用。


#### 14.2.3有效使用头文件

可以将大家都需要的数据结构也写入到头文件中。

### 14.3其他处理大型程序的实用工具

此处是在没有IDE的情况下考虑使用的命令行工具。


#### 14.3.1make实用工具

make用makefile不断进行工具生成新的文件。

#### 14.3.2cvs实用工具

可以得到程序的不同版本编译的文件。


#### 14.3.3Unix实用工具：ar、grep、sed等

grep可以进行查找，利用不同的小模块，文件可以联合在一起。

sed查找字符串将一组原文件所有某一特定变量名全部改为另一名字。

