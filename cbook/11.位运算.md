## 11位运算

以内存访问地址需要指针，以位访问地址需要的是位运算：

1. 按位与运算
2. 按位或运算
3. 按位异或运算
4. 二进制求补运算
5. 左移运算符
6. 右移运算符
7. 位段

### 11.1位的基础知识

**最低位**是字节最右边的位，**最高位**是字节最左边的位。

计算机存储的大小与位数量和有关，当然也与正数的数量有关。

### 11.2位运算符

对各类整数类型（long等）可以执行位运算，都是二元运算符。

与、或、异或、补、左移、右移。

#### 11.2.1按位与运算符
&：只有全为1的时候为1，其余都为0。这个逻辑与&&（逻辑与）是一致的。

**可以&1来判断奇偶性，对于负整数无效。**

**程序11.1 按位与运算符**

```c++

```

#### 12.2.2按位或运算符

|：某一位为1就为1。这个逻辑与||（逻辑或）运算是一致的。

#### 11.2.3按位异或运算符

^：必须一个1和一个0才为1。

异或主要用于交换两个值，能够不额外使用内存位置：

```c++
i1 ^= i2;
i2 ^= i1;
i1 ^= i2;
```

#### 11.2.4二进制求补运算符

~：本身就是一个转换，0为1，1为0。

一元求补运算符的优先级高于所有一元运算符。

**程序11.2 演示位运算符**

```c++

```

**德摩根规则**是 ~(~a & ~b) = a|b 和 ~(~a | ~b) = a & b。

#### 11.2.5左移运算符

左移1位就是数值乘2，计算机就会用一位运算来计算幂。


#### 11.2.6右移运算符

**逻辑右移**是最高位为1时候，右移继续移入0；**算数右移**右移移入1。

#### 11.2.7移位函数

模拟运算的时候正数为左移。

**程序11.3 实现一个移位函数**

```c++

```

#### 11.2.8循环位移

rotate()函数进行各位的循环移动。

**程序11.4 实现循环位移函数**

```c++

```


### 11.3位段

**位段**是用位打包信息的构造。

**掩码**是能够清零位段的数值。

多数情况下是使用结构体来进行的,也会进行相应的位运算处理。

```c++
struct packed_struct
{
    unsigned int :3;
    unsigned int f1:1;
    unsigned int f2:1;
    unsigned int f3:1;
    unsigned int type:8;
    unsigned int index:18;

}
```


