## 7使用函数
C中的优秀代码离不开函数。本章包含：

1. 理解函数的基础知识
2. 解释局部、全局、自动和静态变量
3. 与函数一起使用一维和多维数组
4. 从函数返回数据
5. 用函数执行自上而下的程序设计
6. 在函数中调用其他函数，以及递归函数

### 7.1定义函数
函数的第一行向编译器告知四件事：

1. 谁可以调用它
2. 返回值类型
3. 函数名
4. 参数列表

**main()是C中被特殊识别的名字，表示程序开始执行的地方，而且永远必须有main()。**

**程序7.1 用C语言编写一个函数**


```c++

```


函数调用结束后，会返回main()函数，**如果函数不要求返回值，那么有没有return的退出函数行为都是一样的。**

**程序7.2 调用函数**

```c++

```



**程序7.3 关于调用函数的又一示例**

```c++

```
### 7.2参数和局部变量

**参数**是调用函数时向函数提供的一个或多个值。

**程序7.4 计算第n个三角数**

```c++

```
#### 7.2.1函数原型声明
**函数原型声明**是函数第一行的内容，包含返回值、函数名、形参。

函数内部的变量定义与main函数中定义方式相同。



#### 7.2.2自动局部变量
**自动局部变量**是函数内部定义的变量，通常会加上auto进行定义，但是一般没有人这么做。

要理解谁是函数内部接收形参的自动局部变量。如果形参的值会发生改变，可以考虑用内部再定义局部变量接收两个形参的值。

**程序7.5 修改程序，求最大公约数**

```c++

```

### 7.3返回函数结果
可以将函数计算的结果不仅仅是显示在终端，同样可以返回给调用函数的例程。

```c++
return 表达式;
```

有时候有人会在“表达式”两边放上括号，这是可以选择的。

函数的返回值类型必须声明，否则默认为int类型，是这是不好的编程习惯。

**程序7.6 求最大公约数，并返回结果**

```c++

```

函数的返回值并不一定要指定给一个变量，完全可以作为函数参数。

C中函数返回对象只能有一个值，在函数名前声明void关键字就是不会返回一个值。

**程序7.7 计算绝对值**

```c++

```

**一个函数不可能直接修改它的任何参数值，只能修改它们的副本。**

传递给一个函数的参数类型应当与该函数内部声明的函数类型一致，否则会自动转换，不仅参数表中是这样，返回值也是这样会自动转换。


### 7.4函数调用

**牛顿-拉弗森迭代法**是猜测一个数值，并用计算平方根数字除以猜测之，与猜测值相加除2成为新的猜测值，指导最终猜测值的平方与原数字之差小于一定值的时候就可以终止迭代。


**程序7.8 计算一个数字的平方根**

```c++

```

由此可以发现，形式参数总可以有相同的名字，因为作用域不同。

**此外一个局部变量的作用域是它自己的函数，除非使用指针才能从外部调用一个函数的局部变量。**

#### 7.4.1声明返回类型和参数类型

除非发现以下情况之一，函数会返回int类型的值：

1. 在遇到函数调用之前，已经在程序中定义了该函数。
2. 在遇到函数调用之前，已经生命了该函数的返回值。

否则编译器会返回一个错误进行调试。


再调用程序位置之后定义的函数需要在调用前的位置进行声明。

```c++
float absolute (float);
```

如果函数的参数个数是会变化的，则需要声明

```c++
int printf(char *format, ...);
```

**应该注意在程序的开始声明所有函数。**


#### 7.4.2检查函数参数
函数应该能够自检避免出现无限循环的情况，而后自己进行错误信息的返回。

return语句可以有一个或者多个，必然以第一个结束函数调用，如果没有返回值要求可以写成return后面没有任何值。


### 7.5自上而下的程序设计
通过函数调用函数的思想，可以编写这个函数本身的指令之前就编写对这一函数的调用，而并不一定去理解函数的实现细节。


### 7.6函数与数组
数组中单个元素和任何普通变量传递给函数的效果是一样的。

传递整个数组的值只需要传递数组名。

**程序7.9 找出一个数组中的最小值**

```c++

```

**在参数表中，声明函数的时候是用数组+[]，当调用的时候只需要传递数组名。**


**程序7.10 修改函数，找出一个数组中的最小值**

```c++

```

#### 7.6.1赋值运算符
**程序7.11 在函数中改变数组元素**

```c++

```

**数组**和简**单变量与数组元素**的不同，传递指针进入函数，对值进行修改会有所改变。


#### 7.6.2数组排序

用sort函数进行**递增排序**

**程序7.12 将一个整数数组排列为递增顺序**

```c++

```
体现的也是双标记运行，总之能够遍历整个数组得到结果。


#### 7.6.3多维数组
对于传递进入函数的值是确定的，但是对于声明过程中不能行列都未知，必须至少知道列数（最后一列）。


**程序7.13 使用多维数组和函数**

```c++

```


**多维变长数组与函数**
如果在已有参数表定义中，给定变长大小行列的定义，那么就可以随之而来用之前定义的行列变量指定一个变长数组作为函数参数。

**程序7.14 多维变长数组**

```c++

```

### 7.7全局变量
**全局变量**是程序中任意函数可以访问的变量。

**程序7.15 将一个正整数转换为另一基数**

```c++

```

全局变量可以减少向函数传递参数的个数，但是函数的通用性降低了，也会降低函数的易读性。

可以在所有全局变量的名字前加上小写g。

**全局变量默认初始值为0，局部变量没有默认的初始值。**

### 7.8自动变量与静态变量
此处区分的是自动局部变量和静态变量。

**静态变量**是函数调用和返回时，与下次调用函数的值保持相同。

静态局部变量仅在整个程序初始化时运行初始化一次，前面加static关键字，赋值必须是简单常量或者常量表达式，初始值为0。

**程序7.16 说明静态和自动变量**

```c++

```

### 7.9递归函数
**递归**为了解决一个问题，将统一解决方案持续用于该问题的较小子集。

**程序7.17 递归计算阶乘**

```c++

```

可以用纸笔列出一个等式，将每一步的函数操作建立在不断更新等式右边各项上。


